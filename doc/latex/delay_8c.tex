\hypertarget{delay_8c}{}\section{delay.\+c File Reference}
\label{delay_8c}\index{delay.\+c@{delay.\+c}}


implementation of a delay to task cancel and context switch  


{\ttfamily \#include \char`\"{}include/delay.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{delay_8c_a2ea46c5d591277f06c5db6a38435ec69}{build\+Delay\+Format} (struct tm $\ast$time, char $\ast$format)
\begin{DoxyCompactList}\small\item\em increase the given time by the delay value and build the format \end{DoxyCompactList}\item 
D\+E\+L\+A\+Y\+\_\+\+C\+H\+E\+CK \hyperlink{delay_8c_a5b297985269877cfadfd852c40d1e004}{check\+Delay} (int flag, struct tm $\ast$delay, struct tm $\ast$time)
\begin{DoxyCompactList}\small\item\em check if the end of the delay is stated after the current time \end{DoxyCompactList}\item 
int \hyperlink{delay_8c_a0668c35c9acaad698df13b295a5a2e3a}{delay\+Format\+Validation} (char $\ast$row)
\begin{DoxyCompactList}\small\item\em check the input for a delay format. \end{DoxyCompactList}\item 
int \hyperlink{delay_8c_ab211e0daaca1c28a40e792eca137b810}{parse\+Delay} (struct tm $\ast$delay, char $\ast$str)
\begin{DoxyCompactList}\small\item\em Check a delay format\+: for correct format and values. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
implementation of a delay to task cancel and context switch 

\begin{DoxyAuthor}{Author}
Sebastian Fricke 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2019-\/12-\/19 
\end{DoxyDate}


\subsection{Function Documentation}
\mbox{\Hypertarget{delay_8c_a2ea46c5d591277f06c5db6a38435ec69}\label{delay_8c_a2ea46c5d591277f06c5db6a38435ec69}} 
\index{delay.\+c@{delay.\+c}!build\+Delay\+Format@{build\+Delay\+Format}}
\index{build\+Delay\+Format@{build\+Delay\+Format}!delay.\+c@{delay.\+c}}
\subsubsection{\texorpdfstring{build\+Delay\+Format()}{buildDelayFormat()}}
{\footnotesize\ttfamily void build\+Delay\+Format (\begin{DoxyParamCaption}\item[{struct tm $\ast$}]{time,  }\item[{char $\ast$}]{format }\end{DoxyParamCaption})}



increase the given time by the delay value and build the format 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em time} & tm struct instance (either current time or delay time) \\
\hline
\mbox{\tt in}  & {\em delay} & minutes integer of the time to be added \\
\hline
\mbox{\tt out}  & {\em format} & string of length\+:D\+E\+L\+A\+Y\+\_\+\+F\+O\+R\+M\+A\+T\+\_\+\+L\+EN \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{delay_8c_a5b297985269877cfadfd852c40d1e004}\label{delay_8c_a5b297985269877cfadfd852c40d1e004}} 
\index{delay.\+c@{delay.\+c}!check\+Delay@{check\+Delay}}
\index{check\+Delay@{check\+Delay}!delay.\+c@{delay.\+c}}
\subsubsection{\texorpdfstring{check\+Delay()}{checkDelay()}}
{\footnotesize\ttfamily D\+E\+L\+A\+Y\+\_\+\+C\+H\+E\+CK check\+Delay (\begin{DoxyParamCaption}\item[{int}]{flag,  }\item[{struct tm $\ast$}]{delay,  }\item[{struct tm $\ast$}]{time }\end{DoxyParamCaption})}



check if the end of the delay is stated after the current time 

include the value from the command line flag -\/d into the calculation


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em flag} & timespan of delay of flag (C\+LI) \\
\hline
\mbox{\tt in}  & {\em delay} & delay time instance \\
\hline
\mbox{\tt in}  & {\em time} & current time instance\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em V\+A\+L\+ID} & delay is active with no further increment \\
\hline
{\em V\+A\+L\+I\+D\+\_\+\+P\+L\+U\+S\+\_\+\+N\+EW} & the delay is still active and increased by the user \\
\hline
{\em I\+N\+V\+A\+L\+I\+D\+\_\+\+P\+L\+U\+S\+\_\+\+N\+EW} & delay expired but a new one is created \\
\hline
{\em I\+N\+V\+A\+L\+ID} & delay expired and no new delay to be created \\
\hline
{\em E\+R\+R\+OR} & the check failed with an error \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{delay_8c_a0668c35c9acaad698df13b295a5a2e3a}\label{delay_8c_a0668c35c9acaad698df13b295a5a2e3a}} 
\index{delay.\+c@{delay.\+c}!delay\+Format\+Validation@{delay\+Format\+Validation}}
\index{delay\+Format\+Validation@{delay\+Format\+Validation}!delay.\+c@{delay.\+c}}
\subsubsection{\texorpdfstring{delay\+Format\+Validation()}{delayFormatValidation()}}
{\footnotesize\ttfamily int delay\+Format\+Validation (\begin{DoxyParamCaption}\item[{char $\ast$}]{row }\end{DoxyParamCaption})}



check the input for a delay format. 

Don\textquotesingle{}t check for valid date or date in the past, those tests are performed in the parser.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em row} & string to be checked\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 0} & valid format \\
\hline
{\em -\/1} & bad size \\
\hline
{\em -\/2} & bad format \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{delay_8c_ab211e0daaca1c28a40e792eca137b810}\label{delay_8c_ab211e0daaca1c28a40e792eca137b810}} 
\index{delay.\+c@{delay.\+c}!parse\+Delay@{parse\+Delay}}
\index{parse\+Delay@{parse\+Delay}!delay.\+c@{delay.\+c}}
\subsubsection{\texorpdfstring{parse\+Delay()}{parseDelay()}}
{\footnotesize\ttfamily int parse\+Delay (\begin{DoxyParamCaption}\item[{struct tm $\ast$}]{delay,  }\item[{char $\ast$}]{str }\end{DoxyParamCaption})}



Check a delay format\+: for correct format and values. 

Correct format is Y\+Y\+Y\+Y-\/\+M\+M-\/\+D\+D\+T\+HH\+:mmZ (Y=Year, M=Month, D=Day, H=Hour, m=Minute)


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em str} & the string to be parsed \\
\hline
\mbox{\tt out}  & {\em delay} & tm struct pointer to save the correct values\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 0} & S\+U\+C\+C\+E\+SS \\
\hline
{\em -\/1} & Invalid time (13month, 35th day) \\
\hline
{\em -\/2} & Invalid format (10-\/12-\/2019\+T9\+:00Z) \\
\hline
\end{DoxyRetVals}
